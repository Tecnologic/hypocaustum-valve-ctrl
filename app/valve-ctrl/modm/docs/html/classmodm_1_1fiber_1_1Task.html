<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="DoxyPress 1.7.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>modm API documentation: modm::fiber::Task Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxypress.css" rel="stylesheet" type="text/css" />
<link href="custom.css" rel="stylesheet" type="text/css"/>
<link href="custom_dark_theme.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by DoxyPress -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">modm API documentation
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by DoxyPress 1.7.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions_all.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classmodm_1_1fiber_1_1Task.html',''); initResizable(); });
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#friends">Friends</a> &#124;
<a href="classmodm_1_1fiber_1_1Task-members.html">List of all members</a>  </div>
  <div class="headertitle">
    <div class="title">modm::fiber::Task Class Reference<div class="ingroups"><a class="el" href="group__modm__processing.html">Processing</a> &raquo; <a class="el" href="group__modm__processing__fiber.html">Fibers</a></div></div>
  </div>
  <div class="clear-floats"></div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;modm/processing/fiber/task.hpp&gt;</code></p>
<div class="dynheader">
Inheritance diagram for modm::fiber::Task:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classmodm_1_1fiber_1_1Task.png" usemap="#modm::fiber::Task_map" alt=""/>
  <map id="modm::fiber::Task_map" name="modm::fiber::Task_map">
<area href="classmodm_1_1Fiber.html" alt="modm::Fiber&lt; StackSize &gt;" shape="rect" coords="0,56,159,80"/>
  </map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a0d7dc5617d5357f3fa971f9c74e52109"><td class="memTemplParams" colspan="2">template&lt;size_t Size, class Callable &gt; </td></tr>
<tr class="memitem:a0d7dc5617d5357f3fa971f9c74e52109"><td class="memTemplItemLeft" align="right" valign="top">&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classmodm_1_1fiber_1_1Task.html#a0d7dc5617d5357f3fa971f9c74e52109">Task</a> (<a class="el" href="classmodm_1_1fiber_1_1Stack.html">Stack</a>&lt; Size &gt; &amp;stack, Callable &amp;&amp;closure, Start start=Start::Now)</td></tr>
<tr class="separator:a0d7dc5617d5357f3fa971f9c74e52109"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a59a782591a523c880d0767b1277dd28f"><td class="memItemLeft" align="right" valign="top">modm::fiber::id&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmodm_1_1fiber_1_1Task.html#a59a782591a523c880d0767b1277dd28f">get_id</a> () const</td></tr>
<tr class="separator:a59a782591a523c880d0767b1277dd28f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acf8f3534987b7d47d397d5f5161aca88"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="acf8f3534987b7d47d397d5f5161aca88"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmodm_1_1fiber_1_1Task.html#acf8f3534987b7d47d397d5f5161aca88">joinable</a> () const</td></tr>
<tr class="memdesc:acf8f3534987b7d47d397d5f5161aca88"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks if the <a class="el" href="classmodm_1_1fiber_1_1Task.html">Task</a> object identifies an active fiber of execution. <br /></td></tr>
<tr class="separator:acf8f3534987b7d47d397d5f5161aca88"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1b87faaa11f43ed1864332a41dbeb636"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmodm_1_1fiber_1_1Task.html#a1b87faaa11f43ed1864332a41dbeb636">join</a> ()</td></tr>
<tr class="separator:a1b87faaa11f43ed1864332a41dbeb636"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a41642140fff891e0f6dd95605f8babe0"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a41642140fff891e0f6dd95605f8babe0"></a>
<a class="el" href="classmodm_1_1fiber_1_1stop__source.html">stop_source</a>&#160;</td><td class="memItemRight" valign="bottom"><b>get_stop_source</b> ()</td></tr>
<tr class="separator:a41642140fff891e0f6dd95605f8babe0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad0f92e38de07f8f1bd4214b6e7ce7555"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad0f92e38de07f8f1bd4214b6e7ce7555"></a>
<a class="el" href="classmodm_1_1fiber_1_1stop__token.html">stop_token</a>&#160;</td><td class="memItemRight" valign="bottom"><b>get_stop_token</b> ()</td></tr>
<tr class="separator:ad0f92e38de07f8f1bd4214b6e7ce7555"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa76b8e5462e175143cc4f7e1224b4884"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmodm_1_1fiber_1_1Task.html#aa76b8e5462e175143cc4f7e1224b4884">request_stop</a> ()</td></tr>
<tr class="separator:aa76b8e5462e175143cc4f7e1224b4884"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1ab622721bbc61a749e8e89af05f2907"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmodm_1_1fiber_1_1Task.html#a1ab622721bbc61a749e8e89af05f2907">stack_watermark</a> ()</td></tr>
<tr class="separator:a1ab622721bbc61a749e8e89af05f2907"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a01e71eded589161c4bf6d04841856f4f"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmodm_1_1fiber_1_1Task.html#a01e71eded589161c4bf6d04841856f4f">stack_usage</a> () const</td></tr>
<tr class="separator:a01e71eded589161c4bf6d04841856f4f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc27da008c38afc0a04927a29f7498d3"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmodm_1_1fiber_1_1Task.html#abc27da008c38afc0a04927a29f7498d3">start</a> ()</td></tr>
<tr class="separator:abc27da008c38afc0a04927a29f7498d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2538e069e5fbb05120b1a1b3ec57afda"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmodm_1_1fiber_1_1Task.html#a2538e069e5fbb05120b1a1b3ec57afda">isRunning</a> () const</td></tr>
<tr class="separator:a2538e069e5fbb05120b1a1b3ec57afda"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a0d8324bfcaf01c07e8d99f18a09828ef"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a0d8324bfcaf01c07e8d99f18a09828ef"></a>
static constexpr unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmodm_1_1fiber_1_1Task.html#a0d8324bfcaf01c07e8d99f18a09828ef">hardware_concurrency</a> ()</td></tr>
<tr class="memdesc:a0d8324bfcaf01c07e8d99f18a09828ef"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the number of concurrent threads supported by the implementation. <br /></td></tr>
<tr class="separator:a0d8324bfcaf01c07e8d99f18a09828ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="friends"></a>
Friends</h2></td></tr>
<tr class="memitem:afb88c77ea5daaefa6c8fa6bc5b9aa5c1"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="afb88c77ea5daaefa6c8fa6bc5b9aa5c1"></a>
class&#160;</td><td class="memItemRight" valign="bottom"><b>Scheduler</b></td></tr>
<tr class="separator:afb88c77ea5daaefa6c8fa6bc5b9aa5c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>The fiber task connects the callable fiber object with the fiber context and scheduler. It constructs the fiber function on the stack if necessary, and adds the contexts to the scheduler. If the fiber function returns, the task is removed from the scheduler. Tasks can then be restarted, which will call the fiber function from the beginning again</p>
<p>Note that a task contains no stack, only the control structures necessary for managing a fiber. You may therefore place objects of this class in fast core-local memory, while the stack must remain in DMA-able memory!</p>
<dl class="section see"><dt>See also</dt><dd><a href="https://en.cppreference.com/w/cpp/thread/jthread">https://en.cppreference.com/w/cpp/thread/jthread</a> </dd></dl>
<dl class="section author"><dt>Author</dt><dd>Erik Henriksson </dd>
<dd>
Niklas Hauser </dd></dl>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a0d7dc5617d5357f3fa971f9c74e52109"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;size_t Size, class Callable &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">modm::fiber::Task::Task </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmodm_1_1fiber_1_1Stack.html">Stack</a>&lt; Size &gt; &amp;&#160;</td>
          <td class="paramname"><em>stack</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Callable &amp;&amp;&#160;</td>
          <td class="paramname"><em>closure</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Start&#160;</td>
          <td class="paramname"><em>start</em> = <code>Start::Now</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">stack</td><td>A stack object that is <em>NOT</em> shared with other tasks. </td></tr>
    <tr><td class="paramname">closure</td><td>A callable object of signature <code>void()</code>. </td></tr>
    <tr><td class="paramname">start</td><td>When to start this task. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a59a782591a523c880d0767b1277dd28f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">modm::fiber::id modm::fiber::Task::get_id </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">nodiscard</span><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Returns a value of std::thread::id identifying the thread associated with <code>*this</code>. </p><dl class="section note"><dt>Note</dt><dd>This function can be called from an interrupt. </dd></dl>

</div>
</div>
<a class="anchor" id="a2538e069e5fbb05120b1a1b3ec57afda"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool modm::fiber::Task::isRunning </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">nodiscard</span><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>if the fiber is attached to a scheduler. </dd></dl>

</div>
</div>
<a class="anchor" id="a1b87faaa11f43ed1864332a41dbeb636"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void modm::fiber::Task::join </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Blocks the current fiber until the fiber identified by <code>*this</code> finishes its execution. Returns immediately if the thread is not joinable. </p>

</div>
</div>
<a class="anchor" id="aa76b8e5462e175143cc4f7e1224b4884"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool modm::fiber::Task::request_stop </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section note"><dt>Note</dt><dd>This function can be called from an interrupt. </dd></dl>

</div>
</div>
<a class="anchor" id="a01e71eded589161c4bf6d04841856f4f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t modm::fiber::Task::stack_usage </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">nodiscard</span><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>the stack usage as measured by a watermark level. </dd></dl>
<dl class="section see"><dt>See also</dt><dd><code><a class="el" href="group__modm__processing__fiber__context.html#ga40aabedc1612b75d53d4defef95de058">modm_context_stack_usage()</a></code>. </dd></dl>

</div>
</div>
<a class="anchor" id="a1ab622721bbc61a749e8e89af05f2907"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void modm::fiber::Task::stack_watermark </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Watermarks the stack to measure <code><a class="el" href="classmodm_1_1fiber_1_1Task.html#a01e71eded589161c4bf6d04841856f4f">stack_usage()</a></code> later. </p><dl class="section see"><dt>See also</dt><dd><code><a class="el" href="group__modm__processing__fiber__context.html#ga26fa9eed1d7fa5540e2a7b5ec7197646">modm_context_stack_watermark()</a></code>. </dd></dl>

</div>
</div>
<a class="anchor" id="abc27da008c38afc0a04927a29f7498d3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool modm::fiber::Task::start </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Adds the task to the currently active scheduler, if not already running. </p><dl class="section return"><dt>Returns</dt><dd>if the fiber has been scheduled. </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>fiber/task.hpp</li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for DoxyPress 1.3.7-->
<!-- Generated by DoxyPress 1.7.0 -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><b>modm</b></li><li class="navelem"><b>fiber</b></li><li class="navelem"><a class="el" href="classmodm_1_1fiber_1_1Task.html">Task</a></li>
    <li class="footer">Generated by
    <a href="http://www.copperspice.com/documentation-doxypress.html">
    <img class="footer" src="doxypress.png" alt="DoxyPress"/></a> 1.7.0 </li>
  </ul>
</div>
<script>
if (window.location.href.includes("modm.io")) {
 var device = /\/api\/([a-zA-Z0-9_-]+)\//.exec(window.location.href)[1].toUpperCase();
 document.title = document.title.replace("modm API documentation", "modm API documentation for " + device);
 document.getElementById('projectname').innerHTML = document.getElementById('projectname').innerHTML.replace("modm API documentation", "modm API documentation for " + device);
}
document.getElementById('MSearchResults').onload = function()
{
  var iframe = document.getElementById('MSearchResults').contentWindow.document;
  var head = iframe.getElementsByTagName("head")[0];
  var link = iframe.createElement("link");
  link.setAttribute("rel", "stylesheet");
  link.setAttribute("type", "text/css");
  link.setAttribute("href", "../custom.css");
  head.appendChild(link);
  var link = iframe.createElement("link");
  link.setAttribute("rel", "stylesheet");
  link.setAttribute("type", "text/css");
  link.setAttribute("href", "../custom_dark_theme.css");
  head.appendChild(link);
}
</script>
</body>
</html>
