<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="DoxyPress 1.7.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>modm API documentation: STM32 core module</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxypress.css" rel="stylesheet" type="text/css" />
<link href="custom.css" rel="stylesheet" type="text/css"/>
<link href="custom_dark_theme.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by DoxyPress -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">modm API documentation
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by DoxyPress 1.7.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__modm__platform__core.html',''); initResizable(); });
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#enum-members">Enums</a>  </div>
  <div class="headertitle">
    <div class="title">STM32 core module<div class="ingroups"><a class="el" href="group__modm__platform.html">Platform HAL</a></div></div>
  </div>
  <div class="clear-floats"></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enums</h2></td></tr>
<tr class="memitem:ga9a75ca82fea26cd4f4948f93899d0f55"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga9a75ca82fea26cd4f4948f93899d0f55"></a>enum class &#160;</td><td class="memItemRight" valign="bottom"><b>Peripheral</b> { <br />
&#160;&#160;<b>BitBang</b>, 
<b>Adc1</b>, 
<b>Adc2</b>, 
<b>Adc3</b>, 
<br />
&#160;&#160;<b>Can1</b>, 
<b>Can2</b>, 
<b>Crc</b>, 
<b>Dac</b>, 
<br />
&#160;&#160;<b>Dcmi</b>, 
<b>Dma1</b>, 
<b>Dma2</b>, 
<b>Eth</b>, 
<br />
&#160;&#160;<b>Flash</b>, 
<b>Fsmc</b>, 
<b>I2c1</b>, 
<b>I2c2</b>, 
<br />
&#160;&#160;<b>I2c3</b>, 
<b>I2s</b>, 
<b>I2s2</b>, 
<b>I2s3</b>, 
<br />
&#160;&#160;<b>Iwdg</b>, 
<b>Rcc</b>, 
<b>Rng</b>, 
<b>Rtc</b>, 
<br />
&#160;&#160;<b>Sdio</b>, 
<b>Spi1</b>, 
<b>Spi2</b>, 
<b>Spi3</b>, 
<br />
&#160;&#160;<b>Sys</b>, 
<b>Tim1</b>, 
<b>Tim10</b>, 
<b>Tim11</b>, 
<br />
&#160;&#160;<b>Tim12</b>, 
<b>Tim13</b>, 
<b>Tim14</b>, 
<b>Tim2</b>, 
<br />
&#160;&#160;<b>Tim3</b>, 
<b>Tim4</b>, 
<b>Tim5</b>, 
<b>Tim6</b>, 
<br />
&#160;&#160;<b>Tim7</b>, 
<b>Tim8</b>, 
<b>Tim9</b>, 
<b>Uart4</b>, 
<br />
&#160;&#160;<b>Uart5</b>, 
<b>Usart1</b>, 
<b>Usart2</b>, 
<b>Usart3</b>, 
<br />
&#160;&#160;<b>Usart6</b>, 
<b>Usbotgfs</b>, 
<b>Usbotghs</b>, 
<b>Usbotghsulpi</b>, 
<br />
&#160;&#160;<b>Wwdg</b>, 
<b>Syscfg</b> = Sys
<br />
 }</td></tr>
<tr class="separator:ga9a75ca82fea26cd4f4948f93899d0f55"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>lbuild module: <code>modm:platform:core</code></p>
<p>This module specializes the generic <a href="group__modm__platform__cortex__m.html"><code>modm:platform:cortex-m</code></a> module with STM32-specific startup code and linkerscripts.</p>
<h2>Startup</h2>
<p>The <code>__modm_initialize_platform()</code> callback enables the clock to <code>SYSCFG</code> or <code>AFIO</code> and the clock to all internal SRAMs.</p>
<h2>Linkerscript</h2>
<p>For each target a specific linkerscript is generated out of a template, which move some sections into special RAMs depending on their purpose. You can place static objects in sections via the <code><a class="el" href="group__modm__architecture.html#ga1f31943d7806c1bd0a4ccb49399a4a81" title="Specifies that a variable (or function) lives in a particular section. ">modm_section</a></code> attribute:</p>
<div class="fragment"><div class="line"><span class="comment">// .data sections get copied from flash to RAM during startup</span></div>
<div class="line"><a class="code" href="group__modm__architecture.html#ga1f31943d7806c1bd0a4ccb49399a4a81">modm_section</a>(<span class="stringliteral">&quot;.data_sram1&quot;</span>)</div>
<div class="line">uint64_t data = 0x1234567812345678ull;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// .bss sections are not stored in flash but get zeroed during startup</span></div>
<div class="line"><a class="code" href="group__modm__architecture.html#ga1f31943d7806c1bd0a4ccb49399a4a81">modm_section</a>(&quot;.bss_sram2&quot;)</div>
<div class="line">uint8_t buffer[1024];</div>
<div class="line"> </div>
<div class="line"><span class="comment">// .noinit sections are left uninitialized</span></div>
<div class="line"><a class="code" href="group__modm__architecture.html#ga1f31943d7806c1bd0a4ccb49399a4a81">modm_section</a>(&quot;.noinit_sram3&quot;)</div>
<div class="line">uint8_t display_buffer[480][320];</div>
</div><!-- end fragment -->
<p>Note that the absolute addresses shown here are only for reference and usually differ on a specific device.</p>
<h3>Static RAM (SRAM)</h3>
<p>The most common memory map consists out of the internal Flash and one or more continuous SRAMs, which are grouped together in one large a <code>CONT_SRAM1</code> memory. This allows SRAM1 to overflow into SRAM2 and SRAM3 by pushing all sections in front of it further up and collapsing the heap sections. In that case there is no guarantee that the SRAM specific sections (<code>.data_sramN</code> etc) will remain within their original SRAM section, but you can place large objects into higher SRAMs explicitly to free up the space in the lower sections.</p>
<div class="fragment"><div class="line">            ┌────────────────────────┐◄ __sram3_end</div>
<div class="line">            │ (+HEAP_SRAM3)          │</div>
<div class="line">            │ (.noinit_sram3)        │</div>
<div class="line">            │ (.bss_sram3)           │  only <span class="keywordflow">if</span> SRAM3 exists</div>
<div class="line">   SRAM3    │ (.data_sram3)          │</div>
<div class="line">0x2003 0000 ├────────────────────────┤◄ __sram2_end, __sram3_start</div>
<div class="line">            │ (+HEAP_SRAM2)          │</div>
<div class="line">            │ (.noinit_sram2)        │</div>
<div class="line">            │ (.bss_sram2)           │  only <span class="keywordflow">if</span> SRAM2 exists</div>
<div class="line">   SRAM2    │ (.data_sram2)          │</div>
<div class="line">0x2002 0000 ├────────────────────────┤◄ __sram1_end, __sram2_start</div>
<div class="line">            │  +HEAP_SRAM1           │</div>
<div class="line">            │  .noinit_sram1         │</div>
<div class="line">            │  .noinit               │</div>
<div class="line">            │  .faststack            │</div>
<div class="line">            │  .bss_sram1            │</div>
<div class="line">            │  .bss                  │</div>
<div class="line">            │  .data_sram1           │</div>
<div class="line">            │  .data                 │</div>
<div class="line">            │  .fastdata             │</div>
<div class="line">            │  .fastcode             │</div>
<div class="line">            │ (.vector_ram)          │◄ only <span class="keywordflow">if</span> remapped into RAM</div>
<div class="line">   SRAM1    │  +MAIN_STACK_SIZE      │◄ __main_stack_top</div>
<div class="line">0x2000 0000 └────────────────────────┘◄ __sram1_start</div>
<div class="line"> </div>
<div class="line">            ┌────────────────────────┐◄ __flash_end</div>
<div class="line">            │        (unused)        │</div>
<div class="line">            ├────────────────────────┤◄ __rom_end</div>
<div class="line">            │  .table.heap           │</div>
<div class="line">            │  .table.copy.extern    │</div>
<div class="line">   tables   │  .table.zero.extern    │</div>
<div class="line">            │  .table.copy.intern    │</div>
<div class="line">            │  .table.zero.intern    │</div>
<div class="line">            │                        │</div>
<div class="line">            │ (.data_sram3)          │◄ only <span class="keywordflow">if</span> SRAM3 exists</div>
<div class="line">            │ (.data_sram2)          │◄ only <span class="keywordflow">if</span> SRAM2 exists</div>
<div class="line">    copy    │  .data_sram1           │</div>
<div class="line">    only    │  .data                 │</div>
<div class="line">            │  .fastcode             │</div>
<div class="line">            │  .fastdata             │</div>
<div class="line">            │                        │</div>
<div class="line">            │  .note.gnu.build-<span class="keywordtype">id</span>    │</div>
<div class="line">            │  .assertion            │</div>
<div class="line">            │  .hardware_init        │</div>
<div class="line">            │ (.eh_frame)            │</div>
<div class="line">    read    │ (.ARM.exidx)           │  only with C++ exceptions enabled</div>
<div class="line">    only    │ (.ARM.extab)           │</div>
<div class="line">            │  .init_array           │</div>
<div class="line">            │  .init                 │</div>
<div class="line">            │  .rodata               │</div>
<div class="line">            │  .text                 │</div>
<div class="line">   FLASH    │  .vector_rom           │</div>
<div class="line">0x0800 0000 └────────────────────────┘◄ __rom_start, __flash_start</div>
</div><!-- end fragment -->
<h3>Data Core-Coupled RAM (DCCM)</h3>
<p>Some STM32F4 have a battery-backed backup SRAM and a single-cycle CCM that is only accessible to the core via the D-Code bus, thus the CCM is not DMA-able. Therefore the main stack is placed into SRAM, even though it is slower than CCM.</p>
<div class="fragment"><div class="line">            ┌────────────────────────┐◄ __backup_end</div>
<div class="line">            │  +HEAP_BACKUP          │</div>
<div class="line">            │  .noinit_backup        │</div>
<div class="line">            │  .bss_backup           │</div>
<div class="line">   BACKUP   │  .data_backup          │</div>
<div class="line">0x4002 4000 └────────────────────────┘◄ __backup_start</div>
<div class="line"> </div>
<div class="line">            ┌────────────────────────┐◄ __sram3_end</div>
<div class="line">            │ (+HEAP_SRAM3)          │</div>
<div class="line">            │ (.noinit_sram3)        │</div>
<div class="line">            │ (.bss_sram3)           │  only <span class="keywordflow">if</span> SRAM3 exists</div>
<div class="line">   SRAM3    │ (.data_sram3)          │</div>
<div class="line">0x2003 0000 ├────────────────────────┤◄ __sram2_end, __sram3_start</div>
<div class="line">            │ (+HEAP_SRAM2)          │</div>
<div class="line">            │ (.noinit_sram2)        │</div>
<div class="line">            │ (.bss_sram2)           │  only <span class="keywordflow">if</span> SRAM2 exists</div>
<div class="line">   SRAM2    │ (.data_sram2)          │</div>
<div class="line">0x2002 0000 ├────────────────────────┤◄ __sram1_end, __sram2_start</div>
<div class="line">            │  +HEAP_SRAM1           │</div>
<div class="line">            │  .noinit_sram1         │</div>
<div class="line">            │  .noinit               │</div>
<div class="line">            │  .faststack            │</div>
<div class="line">            │  .bss_sram1            │</div>
<div class="line">            │  .bss                  │</div>
<div class="line">            │  .data_sram1           │</div>
<div class="line">            │  .data                 │</div>
<div class="line">            │  .fastcode             │</div>
<div class="line">            │ (.vector_ram)          │◄ only <span class="keywordflow">if</span> remapped into RAM</div>
<div class="line">   SRAM1    │  +MAIN_STACK_SIZE      │◄ __main_stack_top</div>
<div class="line">0x2000 0000 └────────────────────────┘◄ __sram1_start</div>
<div class="line"> </div>
<div class="line">            ┌────────────────────────┐◄ __ccm_end</div>
<div class="line">   D-Code   │  +HEAP_CCM             │</div>
<div class="line">    only    │  .noinit_ccm           │</div>
<div class="line">   access   │  .bss_ccm              │</div>
<div class="line">            │  .data_ccm             │</div>
<div class="line">    CCM     │  .fastdata             │</div>
<div class="line">0x1000 0000 └────────────────────────┘◄ __ccm_start</div>
<div class="line"> </div>
<div class="line">            ┌────────────────────────┐◄ __flash_end</div>
<div class="line">            │        (unused)        │</div>
<div class="line">            ├────────────────────────┤◄ __rom_end</div>
<div class="line">            │  .table.heap           │</div>
<div class="line">            │  .table.copy.extern    │</div>
<div class="line">   tables   │  .table.zero.extern    │</div>
<div class="line">            │  .table.copy.intern    │</div>
<div class="line">            │  .table.zero.intern    │</div>
<div class="line">            │                        │</div>
<div class="line">            │ (.data_sram3)          │◄ only <span class="keywordflow">if</span> SRAM3 exists</div>
<div class="line">            │ (.data_sram2)          │◄ only <span class="keywordflow">if</span> SRAM2 exists</div>
<div class="line">            │  .data_sram1           │</div>
<div class="line">    copy    │  .data_ccm             │</div>
<div class="line">    only    │  .data_backup          │</div>
<div class="line">            │  .data                 │</div>
<div class="line">            │  .fastdata             │</div>
<div class="line">            │  .fastcode             │</div>
<div class="line">            │                        │</div>
<div class="line">            │  .note.gnu.build-<span class="keywordtype">id</span>    │</div>
<div class="line">            │  .assertion            │</div>
<div class="line">            │  .hardware_init        │</div>
<div class="line">            │ (.eh_frame)            │</div>
<div class="line">    read    │ (.ARM.exidx)           │  only with C++ exceptions enabled</div>
<div class="line">    only    │ (.ARM.extab)           │</div>
<div class="line">            │  .init_array           │</div>
<div class="line">            │  .init                 │</div>
<div class="line">            │  .rodata               │</div>
<div class="line">            │  .text                 │</div>
<div class="line">   FLASH    │  .vector_rom           │</div>
<div class="line">0x0800 0000 └────────────────────────┘◄ __rom_start, __flash_start</div>
</div><!-- end fragment -->
<h3>Instruction Core-Coupled RAM (ICCM)</h3>
<p>Some STM32F3, STM32L4 and STM32G4 devices have a single-cycle CCM that is accessible to the core via the I-Code and D-Code interface. Note that the CCM is not DMA-able.</p>
<div class="fragment"><div class="line">            ┌────────────────────────┐◄ __sram3_end</div>
<div class="line">            │ (+HEAP_SRAM3)          │</div>
<div class="line">            │ (.noinit_sram3)        │</div>
<div class="line">            │ (.bss_sram3)           │  only <span class="keywordflow">if</span> SRAM3 exists</div>
<div class="line">   SRAM3    │ (.data_sram3)          │</div>
<div class="line">0x2003 0000 ├────────────────────────┤◄ __sram2_end, __sram3_start</div>
<div class="line">            │ (+HEAP_SRAM2)          │</div>
<div class="line">            │ (.noinit_sram2)        │</div>
<div class="line">            │ (.bss_sram2)           │  only <span class="keywordflow">if</span> SRAM2 exists</div>
<div class="line">   SRAM2    │ (.data_sram2)          │</div>
<div class="line">0x2002 0000 ├────────────────────────┤◄ __sram1_end, __sram2_start</div>
<div class="line">            │  +HEAP_SRAM1           │</div>
<div class="line">            │  .noinit_sram1         │</div>
<div class="line">            │  .noinit               │</div>
<div class="line">            │  .faststack            │</div>
<div class="line">            │  .bss_sram1            │</div>
<div class="line">            │  .bss                  │</div>
<div class="line">            │  .data_sram1           │</div>
<div class="line">            │  .data                 │</div>
<div class="line">   SRAM1    │  +MAIN_STACK_SIZE      │◄ __main_stack_top</div>
<div class="line">0x2000 0000 └────────────────────────┘◄ __sram1_start</div>
<div class="line"> </div>
<div class="line">            ┌────────────────────────┐◄ __ccm_end</div>
<div class="line">            │  +HEAP_CCM             │</div>
<div class="line">   D-Code   │  .noinit_ccm           │</div>
<div class="line">   I-Code   │  .bss_ccm              │</div>
<div class="line">    only    │  .data_ccm             │</div>
<div class="line">   access   │  .fastdata             │</div>
<div class="line">            │  .fastcode             │</div>
<div class="line">    CCM     │  .vector_ram           │</div>
<div class="line">0x1000 0000 └────────────────────────┘◄ __ccm_start</div>
<div class="line"> </div>
<div class="line">            ┌────────────────────────┐◄ __flash_end</div>
<div class="line">            │        (unused)        │</div>
<div class="line">            ├────────────────────────┤◄ __rom_end</div>
<div class="line">            │  .table.heap           │</div>
<div class="line">            │  .table.copy.extern    │</div>
<div class="line">   tables   │  .table.zero.extern    │</div>
<div class="line">            │  .table.copy.intern    │</div>
<div class="line">            │  .table.zero.intern    │</div>
<div class="line">            │                        │</div>
<div class="line">            │ (.data_sram3)          │◄ only <span class="keywordflow">if</span> SRAM3 exists</div>
<div class="line">            │ (.data_sram2)          │◄ only <span class="keywordflow">if</span> SRAM2 exists</div>
<div class="line">            │  .data_sram1           │</div>
<div class="line">    copy    │  .data_ccm             │</div>
<div class="line">    only    │  .data_backup          │</div>
<div class="line">            │  .data                 │</div>
<div class="line">            │  .fastdata             │</div>
<div class="line">            │  .fastcode             │</div>
<div class="line">            │                        │</div>
<div class="line">            │  .note.gnu.build-<span class="keywordtype">id</span>    │</div>
<div class="line">            │  .assertion            │</div>
<div class="line">            │  .hardware_init        │</div>
<div class="line">            │ (.eh_frame)            │</div>
<div class="line">    read    │ (.ARM.exidx)           │  only with C++ exceptions enabled</div>
<div class="line">    only    │ (.ARM.extab)           │</div>
<div class="line">            │  .init_array           │</div>
<div class="line">            │  .init                 │</div>
<div class="line">            │  .rodata               │</div>
<div class="line">            │  .text                 │</div>
<div class="line">   FLASH    │  .vector_rom           │</div>
<div class="line">0x0800 0000 └────────────────────────┘◄ __rom_start, __flash_start</div>
</div><!-- end fragment -->
<h3>Tightly-Coupled RAM (TCM)</h3>
<p>The STM32F7 devices include an Instruction TCM (ITCM) and a data TCM (DTCM). Note that the DTCM section will overflow into the SRAM1/2 sections.</p>
<div class="fragment"><div class="line">            ┌────────────────────────┐◄ __backup_end</div>
<div class="line">            │  +HEAP_BACKUP          │</div>
<div class="line">            │  .noinit_backup        │</div>
<div class="line">            │  .bss_backup           │</div>
<div class="line">   BACKUP   │  .data_backup          │</div>
<div class="line">0x4002 4000 └────────────────────────┘◄ __backup_start</div>
<div class="line"> </div>
<div class="line">            ┌────────────────────────┐◄ __sram2_end</div>
<div class="line">            │  +HEAP_SRAM2           │</div>
<div class="line">            │  .noinit_sram2         │</div>
<div class="line">            │  .bss_sram2            │</div>
<div class="line">   SRAM2    │  .data_sram2           │</div>
<div class="line">0x2002 0000 ├────────────────────────┤◄ __sram1_end, __sram2_start</div>
<div class="line">            │  +HEAP_SRAM1           │</div>
<div class="line">            │  .noinit_sram1         │</div>
<div class="line">            │  .bss_sram1            │</div>
<div class="line">   SRAM1    │  .data_sram1           │</div>
<div class="line">0x2001 0000 ├────────────────────────┤◄ __dtcm_end, __sram1_start</div>
<div class="line">            │  +HEAP_DTCM            │</div>
<div class="line">            │  .noinit_dtcm          │</div>
<div class="line">            │  .noinit               │</div>
<div class="line">            │  .faststack            │</div>
<div class="line">   D-Code   │  .bss_dtcm             │</div>
<div class="line">    only    │  .bss                  │</div>
<div class="line">   access   │  .data_dtcm            │</div>
<div class="line">            │  .data                 │</div>
<div class="line">            │  .fastdata             │</div>
<div class="line">    DTCM    │  +MAIN_STACK_SIZE      │◄ __main_stack_top</div>
<div class="line">0x2000 0000 └────────────────────────┘◄ __dtcm_start</div>
<div class="line"> </div>
<div class="line">            ┌────────────────────────┐◄ __flash_end</div>
<div class="line">            │        (unused)        │</div>
<div class="line">            ├────────────────────────┤◄ __rom_end</div>
<div class="line">            │  .table.heap           │</div>
<div class="line">            │  .table.copy.extern    │</div>
<div class="line">   tables   │  .table.zero.extern    │</div>
<div class="line">            │  .table.copy.intern    │</div>
<div class="line">            │  .table.zero.intern    │</div>
<div class="line">            │                        │</div>
<div class="line">            │  .data_sram2           │</div>
<div class="line">            │  .data_sram1           │</div>
<div class="line">            │  .data_dtcm            │</div>
<div class="line">    copy    │  .data_itcm            │</div>
<div class="line">    only    │  .data_backup          │</div>
<div class="line">            │  .data                 │</div>
<div class="line">            │  .fastdata             │</div>
<div class="line">            │  .fastcode             │</div>
<div class="line">            │                        │</div>
<div class="line">            │  .note.gnu.build-<span class="keywordtype">id</span>    │</div>
<div class="line">            │  .assertion            │</div>
<div class="line">            │  .hardware_init        │</div>
<div class="line">            │ (.eh_frame)            │</div>
<div class="line">    read    │ (.ARM.exidx)           │  only with C++ exceptions enabled</div>
<div class="line">    only    │ (.ARM.extab)           │</div>
<div class="line">            │  .init_array           │</div>
<div class="line">            │  .init                 │</div>
<div class="line">            │  .rodata               │</div>
<div class="line">            │  .text                 │</div>
<div class="line">   FLASH    │  .vector_rom           │</div>
<div class="line">0x0800 0000 └────────────────────────┘◄ __rom_start, __flash_start</div>
<div class="line"> </div>
<div class="line">            ┌────────────────────────┐◄ __itcm_end</div>
<div class="line">            │  +HEAP_ITCM            │</div>
<div class="line">            │  .noinit_itcm          │</div>
<div class="line">            │  .bss_itcm             │</div>
<div class="line">            │  .data_itcm            │</div>
<div class="line">            │  .fastcode             │</div>
<div class="line">    ITCM    │  .vector_ram           │</div>
<div class="line">0x0000 0000 └────────────────────────┘◄ __itcm_start</div>
</div><!-- end fragment -->
<p>The STM32H7 memory map is more complex with multiple SRAM regions in seperate power domains D1, D2 and D3. Note that the main <code>.data</code> and <code>.bss</code> sections are placed into the D1_SRAM section because the TCMs can't be accessed by peripheral DMA transfers, but only the MDMA.</p>
<div class="fragment"><div class="line">            ┌────────────────────────┐◄ __backup_end</div>
<div class="line">            │  +HEAP_BACKUP          │</div>
<div class="line">            │  .noinit_backup        │</div>
<div class="line">            │  .bss_backup           │</div>
<div class="line">   BACKUP   │  .data_backup          │</div>
<div class="line">0x3880 0000 └────────────────────────┘◄ __backup_start</div>
<div class="line"> </div>
<div class="line">            ┌────────────────────────┐◄ __d3_sram_end</div>
<div class="line">            │  +HEAP_D3_SRAM         │</div>
<div class="line">            │  .noinit_d3_sram       │</div>
<div class="line">            │  .bss_d3_sram          │</div>
<div class="line">  D3_SRAM   │  .data_d3_sram         │</div>
<div class="line">0x3800 0000 └────────────────────────┘◄ __d3_sram_start</div>
<div class="line"> </div>
<div class="line">            ┌────────────────────────┐◄ __d2_sram3_end</div>
<div class="line">            │ (+HEAP_D2_SRAM3)       │</div>
<div class="line">            │ (.noinit_d2_sram3)     │</div>
<div class="line">            │ (.bss_d2_sram3)        │  only <span class="keywordflow">if</span> D2_SRAM3 exists</div>
<div class="line">  D2_SRAM3  │ (.data_d2_sram3)       │</div>
<div class="line">0x3004 0000 ├────────────────────────┤◄ __d2_sram2_end, __d2_sram3_start</div>
<div class="line">            │  +HEAP_D2_SRAM2        │</div>
<div class="line">            │  .noinit_d2_sram2      │</div>
<div class="line">            │  .bss_d2_sram2         │</div>
<div class="line">  D2_SRAM2  │  .data_d2_sram2        │</div>
<div class="line">0x3002 0000 ├────────────────────────┤◄ __d2_sram1_end, __d2_sram2_start</div>
<div class="line">            │  +HEAP_D2_SRAM1        │</div>
<div class="line">            │  .noinit_d2_sram1      │</div>
<div class="line">            │  .bss_d2_sram1         │</div>
<div class="line">  D2_SRAM1  │  .data_d2_sram1        │</div>
<div class="line">0x3000 0000 └────────────────────────┘◄ __d2_sram1_start</div>
<div class="line"> </div>
<div class="line">            ┌────────────────────────┐◄ __d1_sram3_end</div>
<div class="line">            │ (+HEAP_D1_SRAM3)       │</div>
<div class="line">            │ (.noinit_d1_sram3)     │</div>
<div class="line">            │ (.bss_d1_sram3)        │  only <span class="keywordflow">if</span> D1_SRAM3 exists</div>
<div class="line">  D1_SRAM3  │ (.data_d1_sram3)       │</div>
<div class="line">0x240A 0000 ├────────────────────────┤◄ __d1_sram2_end, __d1_sram3_start</div>
<div class="line">            │ (+HEAP_D1_SRAM2)       │</div>
<div class="line">            │ (.noinit_d1_sram2)     │</div>
<div class="line">            │ (.bss_d1_sram2)        │  only <span class="keywordflow">if</span> D1_SRAM2 exists</div>
<div class="line">  D1_SRAM2  │ (.data_d1_sram2)       │</div>
<div class="line">0x2404 0000 ├────────────────────────┤◄ __d1_sram1_end, __d1_sram2_start</div>
<div class="line">            │  +HEAP_D1_SRAM1        │</div>
<div class="line">            │  .noinit_d1_sram1      │</div>
<div class="line">            │  .noinit               │</div>
<div class="line">            │  .faststack            │</div>
<div class="line">            │  .bss_d1_sram1         │</div>
<div class="line">            │  .bss                  │</div>
<div class="line">            │  .data_d1_sram1        │</div>
<div class="line">  D1_SRAM1  │  .data                 │</div>
<div class="line">0x2400 0000 └────────────────────────┘◄ __d1_sram1_start</div>
<div class="line"> </div>
<div class="line">            ┌────────────────────────┐◄ __dtcm_end</div>
<div class="line">            │  +HEAP_DTCM            │</div>
<div class="line">   D-Code   │  .noinit_dtcm          │</div>
<div class="line">    only    │  .bss_dtcm             │</div>
<div class="line">   access   │  .data_dtcm            │</div>
<div class="line">            │  .fastdata             │</div>
<div class="line">    DTCM    │  +MAIN_STACK_SIZE      │◄ __main_stack_top</div>
<div class="line">0x2000 0000 └────────────────────────┘◄ __dtcm_start</div>
<div class="line"> </div>
<div class="line">            ┌────────────────────────┐◄ __flash_end</div>
<div class="line">            │        (unused)        │</div>
<div class="line">            ├────────────────────────┤◄ __rom_end</div>
<div class="line">            │  .table.heap           │</div>
<div class="line">            │  .table.copy.extern    │</div>
<div class="line">   tables   │  .table.zero.extern    │</div>
<div class="line">            │  .table.copy.intern    │</div>
<div class="line">            │  .table.zero.intern    │</div>
<div class="line">            │                        │</div>
<div class="line">            │  .data_d3_sram         │</div>
<div class="line">            │ (.data_d2_sram3)       │◄ only <span class="keywordflow">if</span> D2_SRAM3 exists</div>
<div class="line">            │  .data_d2_sram2        │</div>
<div class="line">            │  .data_d2_sram1        │</div>
<div class="line">            │ (.data_d1_sram3)       │◄ only <span class="keywordflow">if</span> D1_SRAM3 exists</div>
<div class="line">            │ (.data_d1_sram2)       │◄ only <span class="keywordflow">if</span> D1_SRAM2 exists</div>
<div class="line">    copy    │  .data_d1_sram1        │</div>
<div class="line">    only    │  .data_dtcm            │</div>
<div class="line">            │  .data_itcm            │</div>
<div class="line">            │  .data_backup          │</div>
<div class="line">            │  .data                 │</div>
<div class="line">            │  .fastdata             │</div>
<div class="line">            │  .fastcode             │</div>
<div class="line">            │                        │</div>
<div class="line">            │  .note.gnu.build-<span class="keywordtype">id</span>    │</div>
<div class="line">            │  .assertion            │</div>
<div class="line">            │  .hardware_init        │</div>
<div class="line">            │ (.eh_frame)            │</div>
<div class="line">    read    │ (.ARM.exidx)           │  only with C++ exceptions enabled</div>
<div class="line">    only    │ (.ARM.extab)           │</div>
<div class="line">            │  .init_array           │</div>
<div class="line">            │  .init                 │</div>
<div class="line">            │  .rodata               │</div>
<div class="line">            │  .text                 │</div>
<div class="line">   FLASH    │  .vector_rom           │</div>
<div class="line">0x0800 0000 └────────────────────────┘◄ __rom_start, __flash_start</div>
<div class="line"> </div>
<div class="line">            ┌────────────────────────┐◄ __itcm_end</div>
<div class="line">            │  +HEAP_ITCM            │</div>
<div class="line">            │  .noinit_ccm           │</div>
<div class="line">            │  .bss_itcm             │</div>
<div class="line">            │  .data_itcm            │</div>
<div class="line">            │  .fastcode             │</div>
<div class="line">    ITCM    │  .vector_ram           │</div>
<div class="line">0x0000 0000 └────────────────────────┘◄ __itcm_start</div>
</div><!-- end fragment -->
<h2>Static RAM (SRAM) with vector table remap on F0 devices</h2>
<p>This memory map is identical to the SRAM default one, except that <code>.vector_ram</code> is placed at the beginning of SRAM1. It is used on STM32F0 devices in case the platform-specific vector table relocation option <code>modm:platform:core:vector_table_location</code> is set to <code>ram</code>.</p>
<div class="fragment"><div class="line">            ┌────────────────────────┐◄ __sram1_end</div>
<div class="line">            │  +HEAP_SRAM1           │</div>
<div class="line">            │  .noinit_sram1         │</div>
<div class="line">            │  .noinit               │</div>
<div class="line">            │  .faststack            │</div>
<div class="line">            │  .bss_sram1            │</div>
<div class="line">            │  .bss                  │</div>
<div class="line">            │  .data_sram1           │</div>
<div class="line">            │  .data                 │</div>
<div class="line">            │  .fastdata             │</div>
<div class="line">            │  .fastcode             │</div>
<div class="line">            │  +MAIN_STACK_SIZE      │◄ __main_stack_top</div>
<div class="line">   SRAM1    │  .vector_ram           │</div>
<div class="line">0x2000 0000 └────────────────────────┘◄ __sram1_start</div>
<div class="line"> </div>
<div class="line">            ┌────────────────────────┐◄ __flash_end</div>
<div class="line">            │        (unused)        │</div>
<div class="line">            ├────────────────────────┤◄ __rom_end</div>
<div class="line">            │  .table.heap           │</div>
<div class="line">            │  .table.copy.extern    │</div>
<div class="line">   tables   │  .table.zero.extern    │</div>
<div class="line">            │  .table.copy.intern    │</div>
<div class="line">            │  .table.zero.intern    │</div>
<div class="line">            │                        │</div>
<div class="line">    copy    │  .data_sram1           │</div>
<div class="line">    only    │  .data                 │</div>
<div class="line">            │  .fastcode             │</div>
<div class="line">            │  .fastdata             │</div>
<div class="line">            │                        │</div>
<div class="line">            │  .note.gnu.build-<span class="keywordtype">id</span>    │</div>
<div class="line">            │  .assertion            │</div>
<div class="line">            │  .hardware_init        │</div>
<div class="line">            │ (.eh_frame)            │</div>
<div class="line">    read    │ (.ARM.exidx)           │  only with C++ exceptions enabled</div>
<div class="line">    only    │ (.ARM.extab)           │</div>
<div class="line">            │  .init_array           │</div>
<div class="line">            │  .init                 │</div>
<div class="line">            │  .rodata               │</div>
<div class="line">            │  .text                 │</div>
<div class="line">   FLASH    │  .vector_rom           │</div>
<div class="line">0x0800 0000 └────────────────────────┘◄ __rom_start, __flash_start</div>
</div><!-- end fragment -->
 </div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for DoxyPress 1.3.7-->
<!-- Generated by DoxyPress 1.7.0 -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.copperspice.com/documentation-doxypress.html">
    <img class="footer" src="doxypress.png" alt="DoxyPress"/></a> 1.7.0 </li>
  </ul>
</div>
<script>
if (window.location.href.includes("modm.io")) {
 var device = /\/api\/([a-zA-Z0-9_-]+)\//.exec(window.location.href)[1].toUpperCase();
 document.title = document.title.replace("modm API documentation", "modm API documentation for " + device);
 document.getElementById('projectname').innerHTML = document.getElementById('projectname').innerHTML.replace("modm API documentation", "modm API documentation for " + device);
}
document.getElementById('MSearchResults').onload = function()
{
  var iframe = document.getElementById('MSearchResults').contentWindow.document;
  var head = iframe.getElementsByTagName("head")[0];
  var link = iframe.createElement("link");
  link.setAttribute("rel", "stylesheet");
  link.setAttribute("type", "text/css");
  link.setAttribute("href", "../custom.css");
  head.appendChild(link);
  var link = iframe.createElement("link");
  link.setAttribute("rel", "stylesheet");
  link.setAttribute("type", "text/css");
  link.setAttribute("href", "../custom_dark_theme.css");
  head.appendChild(link);
}
</script>
</body>
</html>
